/*
 * JQuery Mobile ThemeSwitcher Plugin
 * https://github.com/demonslord/jqm-themeswitcher
 * Copyright (c) 2013 Alexander Bulei.
 * Licensed under the MIT, GPL licenses.
 * Version: V1.0
 */
 
(function(e,c,a,g){var d="jqmthemeswitcher";var f={themes:[],themesPath:"/",buttonSettings:{icon:"gear",inline:true,shadow:false,theme:"d"},dialogSettings:{theme:"a",headerTitle:"Switch Theme:",headerTheme:"b",contentTheme:"c",closeBtn:"left"},jqmVersion:"1.3.1",cookiename:"jquery-mobile-theme",cookieexpires:365,cookiepath:"/",closeOnSelect:true};function b(i,h){this.element=i;this.$element=e(i);this.options=e.extend(true,f,h);this._defaults=f;this._name=d;this.init()}b.prototype={init:function(){var i=this,j=["default"],h=this.element.id+"_tsdialog";if(this.options.themes.length){e.merge(j,this.options.themes)}if(e.cookie(this.options.cookiename)){this.updateTheme(e.cookie(this.options.cookiename))}this.$element.buttonMarkup(this.options.buttonSettings).attr("href","#"+h);this.$element.bind("vclick",function(){$dialog=e("[data-url="+h+"]");if(!$dialog.length){var m="";m+='<div data-url="'+h+'" data-close-btn="'+i.options.dialogSettings.closeBtn+'" data-role="dialog" data-theme="'+i.options.dialogSettings.theme+'">';m+='<div data-role="header" data-theme="'+i.options.dialogSettings.headerTheme+'">';m+='<div class="ui-title">'+i.options.dialogSettings.headerTitle+"</div>";m+="</div>";m+='<div data-role="content" data-theme="'+i.options.dialogSettings.contentTheme+'">';m+='<ul data-role="listview" data-inset="true"></ul></div>';m+="</div>";$dialog=i.element.tsdialog=e(m);var k=e.mobile.pageContainer;$dialog.appendTo(k);var l=$dialog.find("ul");e.each(j,function(n){e('<li><a href="#" data-rel="back">'+j[n].charAt(0).toUpperCase()+j[n].substr(1)+"</a></li>").bind("vclick",function(){if(i.options.closeOnSelect){$dialog.dialog("close")}i.updateTheme(j[n]);return false}).appendTo(l)});$dialog.page()}})},updateTheme:function(n){var l=this.options.jqmVersion||"1.3.1",m="jquery.mobile.theme-"+l+".css",j=e('link[href*="'+m+'"]').first()||[];var i=this.options.themesPath+n+"/"+m;var h=e('<div id="jqm-themeswitcher-overlay"></div>').css({display:"block",position:"absolute",width:"100%",height:"100%","background-color":"white","z-index":"9999"}).appendTo("body");if(j.length){j[0].href=i}else{var k=e("<link/>").attr("type","text/css").attr("rel","stylesheet").attr("href",i);k.appendTo("head")}e.cookie(this.options.cookiename,n,{expires:this.options.cookieexpires,path:this.options.cookiepath});setTimeout(function(){h.remove()},100)}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})};e(function(){e("."+d)[d]()})})(jQuery,window,document);