/*
 * JQuery Mobile ThemeSwitcher Plugin
 * https://github.com/demonslord/jqm-themeswitcher
 * Copyright (c) 2013 Alexander Bulei.
 * Licensed under the MIT, GPL licenses.
 * Version: V1.0
 */
 
(function(e,c,a,g){var d="jqmthemeswitcher";var f={themes:[],themesPath:"/",buttonSettings:{icon:"gear",inline:true,shadow:false,theme:"d"},dialogSettings:{theme:"a",headerTitle:"Switch Theme:",headerTheme:"b",contentTheme:"c",closeBtn:"left"},jqmVersion:"1.3.1",cookiename:"jquery-mobile-theme",cookieexpires:365,cookiepath:"/"};function b(i,h){this.element=i;this.$element=e(i);this.options=e.extend(true,f,h);this._defaults=f;this._name=d;this.init()}b.prototype={init:function(){var j=this,l=["default"],i=this.element.id+"_tsdialog";if(this.options.themes.length){e.merge(l,this.options.themes)}if(e.cookie(this.options.cookiename)){this.updateTheme(e.cookie(this.options.cookiename))}this.$element.buttonMarkup(this.options.buttonSettings).attr("href","#"+i);var m="";m+='<div data-url="'+i+'" data-close-btn="'+this.options.dialogSettings.closeBtn+'" data-role="dialog" data-theme="'+this.options.dialogSettings.theme+'">';m+='<div data-role="header" data-theme="'+this.options.dialogSettings.headerTheme+'">';m+='<div class="ui-title">'+this.options.dialogSettings.headerTitle+"</div>";m+="</div>";m+='<div data-role="content" data-theme="'+this.options.dialogSettings.contentTheme+'">';m+='<ul data-role="listview" data-inset="true"></ul></div>';m+="</div>";$dialog=this.element.tsdialog=e(m);var h=e.mobile.pageContainer;$dialog.appendTo(h);var k=$dialog.find("ul");e.each(l,function(n){e('<li><a href="#" data-rel="back">'+l[n].charAt(0).toUpperCase()+l[n].substr(1)+"</a></li>").bind("vclick",function(){$dialog.dialog("close");j.updateTheme(l[n]);return false}).appendTo(k)});$dialog.page()},updateTheme:function(m){var k=this.options.jqmVersion||"1.3.1",l="jquery.mobile.theme-"+k+".css",i=e('link[href*="'+l+'"]').first()||[];var h=this.options.themesPath+m+"/"+l;if(i.length){i[0].href=h}else{var j=e("<link/>").attr("type","text/css").attr("rel","stylesheet").attr("href",h);j.appendTo("head")}e.cookie(this.options.cookiename,m,{expires:this.options.cookieexpires,path:this.options.cookiepath})}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})};e(function(){e("."+d)[d]()})})(jQuery,window,document);